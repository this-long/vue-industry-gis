(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67cebe2c"],{"003b":function(e,t,r){"use strict";r("a2e1")},"0cb2":function(e,t,r){var a=r("e330"),n=r("7b0b"),s=Math.floor,i=a("".charAt),o=a("".replace),l=a("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,a,m,d){var p=r+e.length,g=a.length,b=c;return void 0!==m&&(m=n(m),b=u),o(d,b,(function(n,o){var u;switch(i(o,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,r);case"'":return l(t,p);case"<":u=m[l(o,1,-1)];break;default:var c=+o;if(0===c)return n;if(c>g){var d=s(c/10);return 0===d?n:d<=g?void 0===a[d-1]?i(o,1):a[d-1]+i(o,1):n}u=a[c-1]}return void 0===u?"":u}))}},1276:function(e,t,r){"use strict";var a=r("2ba4"),n=r("c65b"),s=r("e330"),i=r("d784"),o=r("44e7"),l=r("825a"),u=r("1d80"),c=r("4840"),m=r("8aa5"),d=r("50c4"),p=r("577e"),g=r("dc4a"),b=r("f36a"),f=r("14c3"),h=r("9263"),v=r("9f7f"),x=r("d039"),F=v.UNSUPPORTED_Y,y=4294967295,$=Math.min,w=[].push,k=s(/./.exec),C=s(w),T=s("".slice),H=!x((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));i("split",(function(e,t,r){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var s=p(u(this)),i=void 0===r?y:r>>>0;if(0===i)return[];if(void 0===e)return[s];if(!o(e))return n(t,s,e,i);var l,c,m,d=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,v=new RegExp(e.source,g+"g");while(l=n(h,v,s)){if(c=v.lastIndex,c>f&&(C(d,T(s,f,l.index)),l.length>1&&l.index<s.length&&a(w,d,b(l,1)),m=l[0].length,f=c,d.length>=i))break;v.lastIndex===l.index&&v.lastIndex++}return f===s.length?!m&&k(v,"")||C(d,""):C(d,T(s,f)),d.length>i?b(d,0,i):d}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:n(t,this,e,r)}:t,[function(t,r){var a=u(this),i=void 0==t?void 0:g(t,e);return i?n(i,t,a,r):n(s,p(a),t,r)},function(e,a){var n=l(this),i=p(e),o=r(s,n,i,a,s!==t);if(o.done)return o.value;var u=c(n,RegExp),g=n.unicode,b=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(F?"g":"y"),h=new u(F?"^(?:"+n.source+")":n,b),v=void 0===a?y:a>>>0;if(0===v)return[];if(0===i.length)return null===f(h,i)?[i]:[];var x=0,w=0,k=[];while(w<i.length){h.lastIndex=F?0:w;var H,_=f(h,F?T(i,w):i);if(null===_||(H=$(d(h.lastIndex+(F?w:0)),i.length))===x)w=m(i,w,g);else{if(C(k,T(i,x,w)),k.length===v)return k;for(var j=1;j<=_.length-1;j++)if(C(k,_[j]),k.length===v)return k;w=x=H}}return C(k,T(i,x)),k}]}),!H,F)},"359e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"HeritageAdd"},[r("div",{staticClass:"HeritageAdd-top"},[r("MainTop",[e._v(e._s("zh_cn"===e.lang?"数据维护":"Data maintenance")+" "),r("span",{staticClass:"gang"},[e._v(" / ")]),e._v(" "+e._s("zh_cn"===e.lang?"遗产管理":"Heritage Management")),r("span",{staticClass:"gang"},[e._v(" / ")]),e._v(" "+e._s("zh_cn"===e.lang?"遗产添加":"Heritage Add"))])],1),r("div",{staticClass:"HeritageAdd-bottom padding15"},[r("el-alert",{attrs:{title:"zh_cn"===e.lang?"填写工业遗产、博物馆或工业旅游区的相关信息来添加一项遗产数据":"Fill in information about industrial heritage, museums or industrial tourist areas to add a heritage data",type:"info"}}),r("br",{directives:[{name:"show",rawName:"v-show",value:0===e.newCoordinate.length,expression:"newCoordinate.length === 0"}]}),r("el-alert",{directives:[{name:"show",rawName:"v-show",value:0===e.newCoordinate.length,expression:"newCoordinate.length === 0"}],attrs:{title:"zh_cn"===e.lang?"请先拾取要添加的工业遗产的地理坐标":"Please pick the geographical coordinates of the industrial heritage to be added first",type:"info"}}),r("br"),r("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.newCoordinate.length,expression:"newCoordinate.length === 0"}],attrs:{type:"primary"},on:{click:e.getCoordinateP}},[e._v("拾取遗产坐标位置")]),r("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.newCoordinate.length,expression:"newCoordinate.length !== 0"}],staticClass:"main-box"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{size:"mini",model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"添加类型",prop:"addType"}},[r("el-radio-group",{model:{value:e.ruleForm.addType,callback:function(t){e.$set(e.ruleForm,"addType",t)},expression:"ruleForm.addType"}},[r("el-radio",{attrs:{label:"工业遗产"}}),r("el-radio",{attrs:{label:"遗产博物馆"}}),r("el-radio",{attrs:{label:"工业旅游区"}})],1)],1),r("el-form-item",{attrs:{label:"遗产名称",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"坐标经度",prop:"jing"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.jing,callback:function(t){e.$set(e.ruleForm,"jing",t)},expression:"ruleForm.jing"}})],1),r("el-form-item",{attrs:{label:"坐标纬度",prop:"wei"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.wei,callback:function(t){e.$set(e.ruleForm,"wei",t)},expression:"ruleForm.wei"}}),r("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.getCoordinateP}},[e._v("重新拾取")])],1),r("el-form-item",{attrs:{label:"所在地址",prop:"address"}},[r("el-input",{model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),r("el-form-item",{attrs:{label:"始建年份",prop:"start"}},[r("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.ruleForm.start,callback:function(t){e.$set(e.ruleForm,"start",t)},expression:"ruleForm.start"}})],1),r("el-form-item",{attrs:{label:"遗产类型",prop:"type"}},[r("el-input",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}})],1),r("el-form-item",{attrs:{label:"所属公司",prop:"company"}},[r("el-input",{model:{value:e.ruleForm.company,callback:function(t){e.$set(e.ruleForm,"company",t)},expression:"ruleForm.company"}})],1),r("el-form-item",{attrs:{label:"保护等级及再利用情况"}},[r("el-input",{model:{value:e.ruleForm.prolevel,callback:function(t){e.$set(e.ruleForm,"prolevel",t)},expression:"ruleForm.prolevel"}})],1),r("el-form-item",{attrs:{label:"工业旅游示范点等级"}},[r("el-input",{model:{value:e.ruleForm.trvlevel,callback:function(t){e.$set(e.ruleForm,"trvlevel",t)},expression:"ruleForm.trvlevel"}})],1),r("el-form-item",{attrs:{label:"旅游景区等级"}},[r("el-rate",{attrs:{texts:["1A景区","2A景区","3A景区","4A景区","5A景区"],"show-text":""},model:{value:e.ruleForm.scelevel,callback:function(t){e.$set(e.ruleForm,"scelevel",t)},expression:"ruleForm.scelevel"}})],1),r("el-form-item",{attrs:{label:"遗产简介",prop:"brief"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入遗产简介"},model:{value:e.ruleForm.brief,callback:function(t){e.$set(e.ruleForm,"brief",t)},expression:"ruleForm.brief"}})],1),r("el-form-item",{attrs:{label:"详细介绍",prop:"details"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入详细介绍"},model:{value:e.ruleForm.details,callback:function(t){e.$set(e.ruleForm,"details",t)},expression:"ruleForm.details"}})],1)],1),r("el-divider"),r("el-alert",{attrs:{title:"zh_cn"===e.lang?"请选择封面图片，注意封面图片仅允许上传一张，多次上传仅最后一张图会展示。为保证上传成功，图片大小建议小于3MB":"Please select a cover image. Note that only one cover image can be uploaded, and only the last image will be displayed after multiple uploads",type:"info"}}),r("br"),r("input",{attrs:{type:"file",multiple:"multiple"},on:{change:e.mainImage}}),r("br"),r("el-divider"),r("el-alert",{attrs:{title:"zh_cn"===e.lang?"请选择工业遗产详细图片，可以上传多张。为保证上传成功，图片大小建议小于3MB":"Please select a detailed picture of industrial heritage. You can upload multiple pictures",type:"info"}}),r("br"),r("input",{attrs:{type:"file",multiple:"multiple"},on:{change:e.addImagesAll}}),r("el-divider"),r("div",{staticClass:"subBtn"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("清空提示")])],1)],1)],1),r("div",{staticClass:"HeritageAdd-images"})])},n=[],s=r("1da1"),i=r("5530"),o=(r("ac1f"),r("5319"),r("1276"),r("d81d"),r("a15b"),r("b0c0"),r("96cf"),r("b2df")),l=r("2f62"),u={components:{MainTop:o["a"]},name:"HeritageAdd",computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])(["lang"])),Object(l["c"])(["newCoordinate","instryType"])),created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.changeCoordinateType("add"),console.log(e.$route),"add"===e.$route.params.editid){t.next=25;break}if(r="","one"!==e.instryType){t.next=10;break}return t.next=7,e.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/mainFun/getOneHeritageMainData/getOneHeritageMainData",{_id:e.$route.params.editid});case 7:r=t.sent,t.next=20;break;case 10:if("two"!==e.instryType){t.next=16;break}return t.next=13,e.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/mainFun/getOneHeritageMuseum/getOneHeritageMuseum",{_id:e.$route.params.editid});case 13:r=t.sent,t.next=20;break;case 16:if("three"!==e.instryType){t.next=20;break}return t.next=19,e.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/mainFun/getOneHeritageTourism/getOneHeritageTourism",{_id:e.$route.params.editid});case 19:r=t.sent;case 20:console.log(r.data.data),e.ruleForm=r.data.data[0],e.getCoordinate(r.data.data[0].coordinate),t.next=27;break;case 25:e.ruleForm.jing=e.newCoordinate[0],e.ruleForm.wei=e.newCoordinate[1];case 27:case"end":return t.stop()}}),t)})))()},data:function(){return{ruleForm:{addType:"",name:"",address:"",type:"",company:"",jing:0,wei:0,start:"",prolevel:"",trvlevel:"",scelevel:null,brief:"",details:"",mainImage:"",imagesAllurl:[],coordinate:[]},rules:{addType:[{required:!0,message:"请选择添加类型",trigger:"change"}],name:[{required:!0,message:"请输入工业遗产名称",trigger:"blur"},{min:3,message:"长度在不少于3个字符",trigger:"blur"}],address:[{required:!0,message:"请选择工业遗产所在地址",trigger:"change"}],type:[{required:!0,message:"请输入工业遗产类型",trigger:"change"}],company:[{required:!0,message:"请输入工业遗产所属公司",trigger:"change"}],start:[{required:!0,message:"请选择遗产始建年份",trigger:"change"}],brief:[{required:!0,message:"请输入工业遗产简介",trigger:"change"}],details:[{required:!0,message:"请输入工业遗产详细介绍",trigger:"change"}],jing:[{required:!0,message:"请输入工业遗产坐标",trigger:"change"}],wei:[{required:!0,message:"请输入工业遗产坐标",trigger:"change"}]}}},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])(["getCoordinate","changeCoordinateType","getapplyCoordinate"])),{},{getCoordinateP:function(){this.getapplyCoordinate([]),this.$router.push("/get/coordinate")},formatTextarea:function(e){var t=/\n/g;e=e.replace(t,"<br>"),console.log(e.split("<br>"));var r=e.split("<br>"),a=r.map((function(e){return"<p class='test'>"+e+"</p>"})),n=a.join("");e=n,console.log()},submitForm:function(e){var t=this;console.log(this.ruleForm),this.$refs[e].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(r){var a,n,s,i,o,l,u,c,m,d,p,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=51;break}if(""===t.ruleForm.mainImage||0===t.ruleForm.imagesAllurl.length){e.next=47;break}if(""!==t.ruleForm.brief?(a=/\n/g,t.ruleForm.brief=t.ruleForm.brief.replace(a,"<br>"),console.log(t.ruleForm.brief.split("<br>")),n=t.ruleForm.brief.split("<br>"),s=n.map((function(e){return"<p class='test'>"+e+"</p>"})),i=s.join(""),t.ruleForm.brief=i):t.$message.error("请完善遗产简介"),""!==t.ruleForm.details?(o=/\n/g,t.ruleForm.details=t.ruleForm.details.replace(o,"<br>"),console.log(t.ruleForm.details.split("<br>")),l=t.ruleForm.details.split("<br>"),u=l.map((function(e){return"<p class='test'>"+e+"</p>"})),c=u.join(""),t.ruleForm.details=c):t.$message.error("请完善遗产简介"),t.ruleForm.coordinate=[t.ruleForm.jing,t.ruleForm.wei],"add"===t.$route.params.editid){e.next=26;break}if("工业遗产"!==t.ruleForm.addType){e.next=12;break}return e.next=9,t.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/mainFun/editHeritageMainData/editHeritageMainData",t.ruleForm);case 9:m=e.sent,console.log("res====",m),200===m.status&&(t.$message({message:"工业遗产信息编辑成功",type:"success"}),t.getCoordinate([]),t.$router.push("/data/manage"));case 12:if("遗产博物馆"!==t.ruleForm.addType){e.next=18;break}return e.next=15,t.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/mainFun/editHeritageMuseum/editHeritageMuseum",t.ruleForm);case 15:m=e.sent,console.log("res====",m),200===m.status&&(t.$message({message:"遗产博物馆信息编辑成功",type:"success"}),t.getCoordinate([]),t.$router.push("/data/manage"));case 18:if("工业旅游区"!==t.ruleForm.addType){e.next=24;break}return e.next=21,t.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/mainFun/editHeritageTourism/editHeritageTourism",t.ruleForm);case 21:m=e.sent,console.log("res====",m),200===m.status&&(t.$message({message:"工业旅游区信息编辑成功",type:"success"}),t.getCoordinate([]),t.$router.push("/data/manage"));case 24:e.next=45;break;case 26:if("工业遗产"!==t.ruleForm.addType){e.next=33;break}return e.next=29,t.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/mainFun/postHeritageMainData/postHeritageMainData",t.ruleForm);case 29:d=e.sent,200===d.status&&(t.$message({message:"工业遗产信息添加成功",type:"success"}),t.getCoordinate([]),t.$router.push("/data/manage")),e.next=45;break;case 33:if("遗产博物馆"!==t.ruleForm.addType){e.next=40;break}return e.next=36,t.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/mainFun/postHeritageMuseum/postHeritageMuseum",t.ruleForm);case 36:p=e.sent,200===p.status&&(t.$message({message:"遗产博物馆信息添加成功",type:"success"}),t.getCoordinate([]),t.$router.push("/data/manage")),e.next=45;break;case 40:if("工业旅游区"!==t.ruleForm.addType){e.next=45;break}return e.next=43,t.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/mainFun/postHeritageTourism/postHeritageTourism",t.ruleForm);case 43:g=e.sent,200===g.status&&(t.$message({message:"工业旅游区信息添加成功",type:"success"}),t.getCoordinate([]),t.$router.push("/data/manage"));case 45:e.next=48;break;case 47:t.$message.error("请上传遗产相关图片");case 48:console.log(t.ruleForm),e.next=53;break;case 51:return t.$message.error("请检查完善相关信息"),e.abrupt("return",!1);case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},mainImage:function(e){var t=this,r=e.target.files[0];console.log(r);var a=new FileReader;a.readAsDataURL(r),a.onload=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.src=a.target.result,e.next=3,t.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/image",{dataUrl:n,name:r.name});case 3:s=e.sent,200===s.status?(console.log(s),t.$message({message:"图片上传成功",type:"success"}),t.ruleForm.mainImage=s.data.fileID):t.$message.error("图片上传失败，请检查网络设置");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addImagesAll:function(e){var t=this,r=e.target.files[0];console.log(r);var a=new FileReader;a.readAsDataURL(r),a.onload=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.src=a.target.result,e.next=3,t.$axios.post("https://790d5b85-9674-4a89-9bcc-c0657ea369be.bspapp.com/image",{dataUrl:n,name:r.name});case 3:s=e.sent,200===s.status?(t.$message({message:"图片上传成功",type:"success"}),t.ruleForm.imagesAllurl.push(s.data.fileID)):t.$message.error("图片上传失败，请检查网络设置");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})},c=u,m=(r("003b"),r("2877")),d=Object(m["a"])(c,a,n,!1,null,null,null);t["default"]=d.exports},"44e7":function(e,t,r){var a=r("861d"),n=r("c6b6"),s=r("b622"),i=s("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},5319:function(e,t,r){"use strict";var a=r("2ba4"),n=r("c65b"),s=r("e330"),i=r("d784"),o=r("d039"),l=r("825a"),u=r("1626"),c=r("5926"),m=r("50c4"),d=r("577e"),p=r("1d80"),g=r("8aa5"),b=r("dc4a"),f=r("0cb2"),h=r("14c3"),v=r("b622"),x=v("replace"),F=Math.max,y=Math.min,$=s([].concat),w=s([].push),k=s("".indexOf),C=s("".slice),T=function(e){return void 0===e?e:String(e)},H=function(){return"$0"==="a".replace(/./,"$0")}(),_=function(){return!!/./[x]&&""===/./[x]("a","$0")}(),j=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));i("replace",(function(e,t,r){var s=_?"$":"$0";return[function(e,r){var a=p(this),s=void 0==e?void 0:b(e,x);return s?n(s,e,a,r):n(t,d(a),e,r)},function(e,n){var i=l(this),o=d(e);if("string"==typeof n&&-1===k(n,s)&&-1===k(n,"$<")){var p=r(t,i,o,n);if(p.done)return p.value}var b=u(n);b||(n=d(n));var v=i.global;if(v){var x=i.unicode;i.lastIndex=0}var H=[];while(1){var _=h(i,o);if(null===_)break;if(w(H,_),!v)break;var j=d(_[0]);""===j&&(i.lastIndex=g(o,m(i.lastIndex),x))}for(var M="",A=0,O=0;O<H.length;O++){_=H[O];for(var R=d(_[0]),I=F(y(c(_.index),o.length),0),D=[],q=1;q<_.length;q++)w(D,T(_[q]));var z=_.groups;if(b){var P=$([R],D,I,o);void 0!==z&&w(P,z);var N=d(a(n,void 0,P))}else N=f(R,o,I,D,z,n);I>=A&&(M+=C(o,A,I)+N,A=I+R.length)}return M+C(o,A)}]}),!j||!H||_)},"8aa5":function(e,t,r){"use strict";var a=r("6547").charAt;e.exports=function(e,t,r){return t+(r?a(e,t).length:1)}},a2e1:function(e,t,r){}}]);
//# sourceMappingURL=chunk-67cebe2c.207d740c.js.map