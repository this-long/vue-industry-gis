(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa5c79ae"],{"8bcc":function(e,a,t){"use strict";t("e833")},d261:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"travel-plan"},[0!==e.mainType.length?t("div",{directives:[{name:"show",rawName:"v-show",value:e.opePanel,expression:"opePanel"}],staticClass:"opePanel"},[t("p",{staticClass:"opetitle"},[e._v("出行规划查看面板")]),t("el-divider",[t("span",[e._v("遗产简介")])]),t("span",[e._v("景区类型：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.mainType[0]))]),t("br"),t("span",[e._v("景区名称：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.mainType[1].name))]),t("br"),t("span",[e._v("景区地址：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.mainType[1].address))]),t("br"),t("span",[e._v("所属公司：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.mainType[1].company))]),t("br"),t("span",[e._v("始建年限：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.mainType[1].start))]),t("br"),t("span",[e._v("景区类型：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.mainType[1].type))]),t("br"),t("span",[e._v("详细地址：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.geocoderText))]),t("el-divider",[t("span",[e._v("天气预报")])]),t("span",[e._v("城市/区：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.todayWeather.city))]),t("br"),t("span",[e._v("天气：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.todayWeather.weather))]),t("br"),t("span",[e._v("温度：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.todayWeather.temperature))]),t("br"),t("span",[e._v("风向：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.todayWeather.windDirection))]),t("br"),t("span",[e._v("风力：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.todayWeather.windPower))]),t("br"),t("span",[e._v("空气湿度：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.todayWeather.humidity))]),t("br"),t("span",[e._v("发布时间：")]),t("span",{staticClass:"greyText"},[e._v(e._s(e.todayWeather.reportTime))]),t("br"),t("br"),e.isfourDayWeather?t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.isfourDayWeather=!1}}},[e._v("关闭未来4天天气预报")]):t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.isfourDayWeather=!0}}},[e._v("查看未来4天天气预报")]),t("br"),e.fourDayWeatherList.length&&e.isfourDayWeather?t("div",[t("br"),e._l(e.fourDayWeatherList,(function(a,i){return t("div",{key:i,staticClass:"weatherList"},[t("span",{staticClass:"fourtext"},[e._v("日期："+e._s(a.date)+" | ")]),t("span",{staticClass:"fourtext"},[e._v("天气："+e._s(a.dayWeather)+" | ")]),t("span",{staticClass:"fourtext"},[e._v("气温："+e._s(a.nightTemp)+" ~ "+e._s(a.dayTemp)+"℃")])])}))],2):e._e(),t("el-divider",[t("span",[e._v("规划推荐线路")])]),t("el-radio",{attrs:{label:"LEAST_TIME"},model:{value:e.radio,callback:function(a){e.radio=a},expression:"radio"}},[e._v("最快捷")]),t("el-radio",{attrs:{label:"LEAST_FEE"},model:{value:e.radio,callback:function(a){e.radio=a},expression:"radio"}},[e._v("最经济")]),t("el-radio",{attrs:{label:"LEAST_DISTANCE"},model:{value:e.radio,callback:function(a){e.radio=a},expression:"radio"}},[e._v("最短距离")]),t("el-radio",{attrs:{label:"REAL_TRAFFIC"},model:{value:e.radio,callback:function(a){e.radio=a},expression:"radio"}},[e._v("考虑实时路况")]),t("br"),t("br"),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getDrvie}},[e._v("查看推荐线路")]),e.driving?t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.clearDrvie}},[e._v("清空线路")]):e._e(),t("el-divider",[t("span",{staticClass:"fourtext"},[e._v("查看周边：")]),t("span",[e._v("吃喝玩乐")])]),t("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入想要查询的周边内容",size:"mini"},model:{value:e.periphery,callback:function(a){e.periphery=a},expression:"periphery"}}),t("br"),t("div",[t("br"),t("span",[e._v("查询范围")]),t("br"),t("el-radio",{attrs:{label:1e3},model:{value:e.perRange,callback:function(a){e.perRange=a},expression:"perRange"}},[e._v("1千米")]),t("el-radio",{attrs:{label:2e3},model:{value:e.perRange,callback:function(a){e.perRange=a},expression:"perRange"}},[e._v("2千米")]),t("el-radio",{attrs:{label:3e3},model:{value:e.perRange,callback:function(a){e.perRange=a},expression:"perRange"}},[e._v("3千米")]),t("el-radio",{attrs:{label:5e3},model:{value:e.perRange,callback:function(a){e.perRange=a},expression:"perRange"}},[e._v("5千米")]),t("br"),t("br")],1),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getperiphery}},[e._v("查找")]),e.placeSearch?t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.clearperiphery}},[e._v("清空查找结果")]):e._e(),t("el-divider",[t("span",{staticClass:"fourtext"},[e._v("预算评估")])]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.moneyplan}},[e._v("点击进行预算评估")])],1):e._e(),t("div",{staticClass:"travel-plan-bottom"},[t("div",{staticClass:"travel-plan-btns"},[t("el-cascader",{staticClass:"maincascader",attrs:{size:"mini",options:e.selOptions,placeholder:"请选择出行目的地"},on:{change:e.handleChange},model:{value:e.mainType,callback:function(a){e.mainType=a},expression:"mainType"}}),e.opePanel?t("el-button",{staticClass:"tranPlanBtn",attrs:{type:"primary",size:"mini"},on:{click:function(a){e.opePanel=!1}}},[e._v("关闭面板")]):t("el-button",{staticClass:"tranPlanBtn",attrs:{type:"primary",size:"mini"},on:{click:e.openOpePanel}},[e._v("进行规划")]),t("el-button",{attrs:{size:"mini"},on:{click:function(a){e.dialogVisible=!0}}},[e._v("查看当前位置")])],1),t("div",{staticClass:"container",attrs:{id:"container"}}),t("div",{attrs:{id:"panel"}}),t("div",{attrs:{id:"place"}})]),t("el-dialog",{attrs:{title:"当前位置",visible:e.dialogVisible,width:"45%"},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("span",{staticClass:"spanP"},[e._v("当前坐标："+e._s(e.geolocationRes.position))]),t("br"),t("span",{staticClass:"spanP"},[e._v("定位类型："+e._s(e.geolocationRes.location_type))]),t("br"),t("span",{staticClass:"spanP"},[e._v("详细地址："+e._s(e.geolocationRes.formattedAddress))]),t("br"),t("span",{staticClass:"spanP"},[e._v("定位状态："),"SUCCESS"===e.geolocationRes.info?t("el-tag",{attrs:{type:"success"}},[e._v("定位正常")]):t("el-tag",{attrs:{type:"danger"}},[e._v("定位失败")])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},s=[],n=t("1da1"),r=t("5530"),o=(t("96cf"),t("d81d"),t("ac1f"),t("841c"),t("b0c0"),t("fb6a"),t("4de4"),t("d3b7"),t("2f62")),l={components:{},data:function(){return{map:"",district:null,geolocation:null,geolocationRes:{},dialogVisible:!1,mainType:[],selOptions:[{value:"工业遗产",label:"工业遗产",children:[]},{value:"工业博物馆",label:"工业博物馆",children:[]},{value:"工业旅游区",label:"工业旅游区",children:[]}],opePanel:!1,geocoder:null,geocoderText:"",weatherPlace:"",todayWeather:{},isfourDayWeather:!1,fourDayWeatherList:[],drivingOption:null,driving:null,radio:"LEAST_TIME",periphery:"",perRange:1e3,restaurants:[{value:"宾馆"},{value:"酒店"},{value:"停车场"},{value:"公园"},{value:"超市"},{value:"医院"},{value:"学校"}],placeSearch:null}},computed:Object(r["a"])({},Object(o["c"])(["lang"])),created:function(){this.getOptions()},mounted:function(){this.initMap(),this.drawBounds()},methods:{initMap:function(){var e=this;this.map=new AMap.Map("container",{resizeEnable:!0,zooms:[6.5,18],viewMode:"3D",lang:this.lang,mapStyle:"amap://styles/macaron"}),AMap.plugin("AMap.Geolocation",(function(){e.geolocation=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0}),e.map.addControl(e.geolocation),e.geolocation.getCurrentPosition((function(a,t){"complete"==a?(e.geolocationRes=t,console.log(e.geolocationRes)):(e.$message.error("定位失败，请检查浏览器权限。可以更换Eage浏览器进行定位。"),console.log("定位结果",t))}))}))},drawBounds:function(){if(!this.district){var e={subdistrict:0,extensions:"all",level:"province"};this.district=new AMap.DistrictSearch(e)}this.district.setLevel("province");var a=this;this.district.search("河北省",(function(e,t){var i=[new AMap.LngLat(-360,90,!0),new AMap.LngLat(-360,-90,!0),new AMap.LngLat(360,-90,!0),new AMap.LngLat(360,90,!0)],s=t.districtList[0].boundaries,n=[i];n.push.apply(n,s);var r=new AMap.Polygon({pathL:n,strokeColor:"#F9D5A7",strokeWeight:1,fillColor:"#F9D5A7",fillOpacity:.2});r.setPath(n),a.map.add(r)}))},getOptions:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.get("/getHeritageMainData/getHeritageMainData");case 2:return t=a.sent,e.selOptions[0].children=t.data.data.map((function(e){return{value:e,label:e.name}})),a.next=6,e.$axios.get("/getHeritageMuseum/getHeritageMuseum");case 6:return i=a.sent,e.selOptions[1].children=i.data.data.map((function(e){return{value:e,label:e.name}})),a.next=10,e.$axios.get("/getHeritageTourism/getHeritageTourism");case 10:s=a.sent,e.selOptions[2].children=s.data.data.map((function(e){return{value:e,label:e.name}})),console.log("all",e.selOptions);case 13:case"end":return a.stop()}}),a)})))()},handleChange:function(e){console.log(e),this.opePanel=!1},openOpePanel:function(){0!==this.mainType.length?(this.getHeritageAddress(),this.opePanel=!0):this.$message({message:"请先选择出行目的地在进行旅行规划",type:"warning"})},getHeritageAddress:function(){var e=this;this.geocoder=new AMap.Geocoder({radius:1e3}),this.geocoder.getAddress(this.mainType[1].coordinate,(function(a,t){if("complete"===a&&t.regeocode){e.geocoderText=t.regeocode.formattedAddress;var i=e.geocoderText.search("省"),s=e.geocoderText.search("市");e.weatherPlace=e.geocoderText.slice(i+1,s),AMap.plugin("AMap.Weather",(function(){var a=new AMap.Weather;a.getLive(e.weatherPlace,(function(a,t){a||(console.log("当天天气",t),e.todayWeather=t)})),a.getForecast(e.weatherPlace,(function(a,t){a||(e.fourDayWeatherList=t.forecasts,console.log("四天天气",e.fourDayWeatherList))}))}))}else log.error("根据经纬度查询地址失败")}))},getDrvie:function(){var e=this;console.log(111),this.driving&&this.driving.clear(),"LEAST_TIME"===this.radio?this.drivingOption={policy:AMap.DrivingPolicy.LEAST_TIME,ferry:1,province:"冀",map:this.map,panel:"panel",autoFitView:!0}:"LEAST_FEE"===this.radio?this.drivingOption={policy:AMap.DrivingPolicy.LEAST_FEE,ferry:1,province:"冀",map:this.map,panel:"panel",autoFitView:!0}:"LEAST_DISTANCE"===this.radio?this.drivingOption={policy:AMap.DrivingPolicy.LEAST_DISTANCE,ferry:1,province:"冀",map:this.map,panel:"panel",autoFitView:!0}:"REAL_TRAFFIC"===this.radio&&(this.drivingOption={policy:AMap.DrivingPolicy.REAL_TRAFFIC,ferry:1,province:"冀",map:this.map,panel:"panel",autoFitView:!0}),this.driving=new AMap.Driving(this.drivingOption),this.driving.search([this.geolocationRes.position.R,this.geolocationRes.position.Q],this.mainType[1].coordinate,(function(a,t){"complete"===a?(e.$message({message:"绘制驾车路线完成",type:"success"}),console.log(t)):e.$message.error("获取驾车数据失败：")}))},clearDrvie:function(){this.driving.clear(),this.driving=null,this.$message({message:"驾车路线已清空",type:"success"})},querySearch:function(e,a){var t=this.restaurants,i=e?t.filter(this.createFilter(e)):t;a(i)},createFilter:function(e){return function(a){return 0===a.value.toLowerCase().indexOf(e.toLowerCase())}},getperiphery:function(){var e=this;console.log(this.periphery),console.log(this.perRange),this.placeSearch&&(this.placeSearch.clear(),this.placeSearch=null),""!==this.periphery?(AMap.service(["AMap.PlaceSearch"],(function(){e.placeSearch=new AMap.PlaceSearch({type:e.periphery,pageSize:20,pageIndex:1,map:e.map,panel:"place",autoFitView:!0});var a=e.mainType[1].coordinate;e.placeSearch.searchNearBy("",a,e.perRange,(function(e,a){}))})),this.opePanel=!1,this.$message({message:"为便于查看，出行规划面板已展示关闭，如需要再次打开即可。",type:"warning"})):this.$message.error("请选择查询关键词")},clearperiphery:function(){this.placeSearch.clear(),this.placeSearch=null},moneyplan:function(){console.log("moneyplan"),this.$router.push({path:"/travel/money"})}}},c=l,p=(t("8bcc"),t("2877")),d=Object(p["a"])(c,i,s,!1,null,null,null);a["default"]=d.exports},e833:function(e,a,t){}}]);
//# sourceMappingURL=chunk-aa5c79ae.0534adfe.js.map