(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d1d81e8"],{"011a":function(a,e,t){},"13ee":function(a,e,t){"use strict";t("011a")},"3fca":function(a,e,t){},"6be0":function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"ApplyHeritageMain"},[t("div",{staticClass:"ApplyHeritageMain-top"},[t("MainTop",[a._v("遗产数据 "),t("span",{staticClass:"gang"},[a._v(" / ")]),a._v(" 遗产详情")])],1),t("div",{staticClass:"ApplyHeritageMain-bottom padding15"},[t("el-alert",{attrs:{title:"\n      \n          管理员，欢迎您,请对用户的申请进行客观审批。\n         \n      ",type:"info"}}),t("br"),null!==a.heritageMainData?t("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"title"},[a._v(a._s(a.heritageMainData.name))]),t("div",[t("span",{staticStyle:{"margin-right":"10px"}},[a._v(a._s(a.heritageMainData.addType))]),"pending"===a.heritageMainData.approvalStatus?t("el-tag",{attrs:{type:"info"}},[a._v("待审批")]):a._e(),"adopt"===a.heritageMainData.approvalStatus?t("el-tag",{attrs:{type:"success"}},[a._v("已通过")]):a._e(),"reject"===a.heritageMainData.approvalStatus?t("el-tag",{attrs:{type:"danger"}},[a._v("已驳回")]):a._e()],1)]),t("div",{staticClass:"text item"},[t("div",[t("div",{staticClass:"text-che"},[t("span",[a._v("始建年份："+a._s(a.heritageMainData.start))])])]),t("div",{staticClass:"text-che"},[t("span",[a._v("遗产类型："+a._s(a.heritageMainData.type))])]),t("div",{staticClass:"text-che"},[t("span",[a._v("遗产地址："+a._s(a.heritageMainData.address))])]),t("div",{staticClass:"text-che"},[t("span",[a._v("所属公司："+a._s(a.heritageMainData.company))])]),t("div",{staticClass:"text-che"},[t("span",[a._v("地理坐标："+a._s(a.heritageMainData.jing)+","+a._s(a.heritageMainData.wei))])]),t("div",{staticClass:"text-che"},[t("span",[a._v(" 保护等级及再利用情况：")]),t("p",[a._v(" "+a._s(a.heritageMainData.prolevel?a.heritageMainData.prolevel:"暂无数据")+" ")])]),t("div",{staticClass:"text-che"},[t("span",[a._v("旅游景区等级： "+a._s(a.heritageMainData.scelevel?a.heritageMainData.scelevel+"A级示范景区":"暂无数据"))])]),t("div",{staticClass:"text-che"},[t("span",[a._v("工业旅游示范点等级： "+a._s(a.heritageMainData.trvlevel?a.heritageMainData.trvlevel:"暂无数据"))])]),t("el-divider"),t("div",{staticClass:"text-che"},[t("span",[a._v("遗产简介： ")])]),t("div",{staticClass:"text-che",domProps:{innerHTML:a._s(a.heritageMainData.brief)}}),t("div",{staticClass:"text-che"},[t("img",{staticClass:"mainImage",attrs:{src:a.heritageMainData.mainImage,alt:""}})]),t("el-divider"),t("div",{staticClass:"text-che"},[t("span",[a._v("工业遗产详细介绍： ")])]),t("div",{staticClass:"text-che",domProps:{innerHTML:a._s(a.heritageMainData.details)}}),t("div",{staticClass:"text-che"},[t("span",[a._v("相关图片 ")])]),t("div",{staticClass:"text-che"},[t("el-carousel",{attrs:{interval:4e3,type:"card",height:"500px"}},a._l(a.heritageMainData.imagesAllurl,(function(a){return t("el-carousel-item",{key:a},[t("img",{staticClass:"otherImage",attrs:{src:a,alt:""}})])})),1)],1),t("div",{staticClass:"text-che"},[t("span",[a._v("审批意见： ")])]),""!==a.heritageMainData.approvalComments?t("div",{staticClass:"text-che",domProps:{innerHTML:a._s(a.heritageMainData.approvalComments)}}):t("div",{staticClass:"text-che"},[t("p",[a._v("暂无意见")])]),t("el-divider"),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:a.ruleForm,rules:a.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"审批结果",prop:"approvalStatus"}},[t("el-radio-group",{model:{value:a.ruleForm.approvalStatus,callback:function(e){a.$set(a.ruleForm,"approvalStatus",e)},expression:"ruleForm.approvalStatus"}},[t("el-radio",{attrs:{label:"同意",value:"adopt"}}),t("el-radio",{attrs:{label:"驳回",value:"reject"}})],1)],1),t("el-form-item",{attrs:{label:"审批意见",prop:"approvalComments"}},[t("el-input",{attrs:{type:"textarea"},model:{value:a.ruleForm.approvalComments,callback:function(e){a.$set(a.ruleForm,"approvalComments",e)},expression:"ruleForm.approvalComments"}})],1),"驳回"===a.ruleForm.approvalStatus?t("el-form-item",{attrs:{label:"驳回原因"}},[t("el-radio-group",{model:{value:a.ruleForm.rejectComment,callback:function(e){a.$set(a.ruleForm,"rejectComment",e)},expression:"ruleForm.rejectComment"}},[t("el-radio",{attrs:{label:"图片不全"}}),t("el-radio",{attrs:{label:"坐标或地址与实际不符"}}),t("el-radio",{attrs:{label:"个人信息或联系方式有误"}}),t("el-radio",{attrs:{label:"遗产内容不完善"}}),t("el-radio",{attrs:{label:"其他"}})],1)],1):a._e(),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(e){return a.submitForm("ruleForm")}}},[a._v("立即创建")])],1)],1)],1)]):a._e()],1)])},s=[],i=t("1da1"),n=(t("b0c0"),t("96cf"),t("b2df")),l={name:"ApplyHeritageMain",components:{MainTop:n["a"]},data:function(){return{heritageMainData:null,ruleForm:{approvalStatus:"",approvalComments:"",rejectComment:""},rules:{approvalStatus:[{required:!0,message:"请输入选择审批类型",trigger:"blur"}],approvalComments:[{required:!0,message:"请输入审批意见",trigger:"change"}]}}},created:function(){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(a.heritageMainData),e.next=3,a.$axios.post("/getOneApplyHeritage/getOneApplyHeritage",{_id:a.$route.params.applyid});case 3:t=e.sent,a.heritageMainData=t.data.data[0],console.log(a.heritageMainData);case 6:case"end":return e.stop()}}),e)})))()},methods:{submitForm:function(a){var e=this;this.$refs[a].validate(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(t){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=35;break}return console.log(e.ruleForm),"同意"===e.ruleForm.approvalStatus?e.heritageMainData.approvalStatus="adopt":"驳回"===e.ruleForm.approvalStatus&&(e.heritageMainData.approvalStatus="reject"),e.heritageMainData.approvalComments=e.ruleForm.approvalComments,e.heritageMainData.rejectComment=e.ruleForm.rejectComment,a.next=7,e.$axios.post("/editApplyHeritage/editApplyHeritage",e.heritageMainData);case 7:if(r=a.sent,200!==r.status){a.next=33;break}if("adopt"!==e.heritageMainData.approvalStatus){a.next=31;break}if(s="",i={addType:e.heritageMainData.addType,name:e.heritageMainData.name,address:e.heritageMainData.address,type:e.heritageMainData.type,company:e.heritageMainData.company,jing:e.heritageMainData.jing,wei:e.heritageMainData.wei,start:e.heritageMainData.start,prolevel:e.heritageMainData.prolevel,trvlevel:e.heritageMainData.trvlevel,scelevel:e.heritageMainData.scelevel,brief:e.heritageMainData.brief,details:e.heritageMainData.details,mainImage:e.heritageMainData.mainImage,imagesAllurl:e.heritageMainData.imagesAllurl,coordinate:e.heritageMainData.coordinate},"工业遗产"!==e.heritageMainData.addType){a.next=18;break}return a.next=15,e.$axios.post("/postHeritageMainData/postHeritageMainData",i);case 15:s=a.sent,a.next=28;break;case 18:if("遗产博物馆"!==e.heritageMainData.addType){a.next=24;break}return a.next=21,e.$axios.post("/postHeritageMuseum/postHeritageMuseum",i);case 21:s=a.sent,a.next=28;break;case 24:if("工业旅游区"!==e.heritageMainData.addType){a.next=28;break}return a.next=27,e.$axios.post("/postHeritageTourism/postHeritageTourism",i);case 27:s=a.sent;case 28:200===s.status&&(e.$message({message:"审批成功",type:"success"}),e.$router.push("/heritage/approve")),a.next=33;break;case 31:e.$message({message:"审批成功",type:"success"}),e.$router.push("/heritage/approve");case 33:a.next=37;break;case 35:return e.$message.error("请完善审批信息"),a.abrupt("return",!1);case 37:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}}},o=l,c=(t("a33a"),t("2877")),p=Object(c["a"])(o,r,s,!1,null,null,null);e["default"]=p.exports},a33a:function(a,e,t){"use strict";t("3fca")},b2df:function(a,e,t){"use strict";var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"main-top"},[t("div",{staticClass:"main-top-left"},[t("span",{staticClass:"el-icon-arrow-left"}),t("span",[a._t("default")],2)]),t("div",{staticClass:"main-top-right"},[t("div",{staticClass:"btnBox"},[t("el-dropdown",{on:{command:a.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[a._v(" "+a._s("zh_cn"===a.lang?"中文":"English")),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"zh_cn"}},[a._v(" "+a._s("zh_cn"===a.lang?"中文":"Chinese"))]),t("el-dropdown-item",{attrs:{command:"zh_en"}},[a._v(" "+a._s("zh_cn"===a.lang?"英文":"English"))])],1)],1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:a.leginOut}},[a._v(" "+a._s("zh_cn"===a.lang?"退出登陆":"SignOut"))])],1),t("el-avatar",{staticStyle:{"margin-left":"10px"},attrs:{shape:"square",size:"small",src:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-790d5b85-9674-4a89-9bcc-c0657ea369be/5f0c8b2c-22e0-42f3-9ed3-539de3652c08.jpg"}})],1)])},s=[],i=t("5530"),n=t("2f62"),l={name:"MainTop",created:function(){},computed:Object(i["a"])({},Object(n["c"])(["lang"])),methods:Object(i["a"])(Object(i["a"])({},Object(n["b"])(["langChange"])),{},{handleCommand:function(a){this.langChange(a)},leginOut:function(){sessionStorage.removeItem("username"),this.$router.push("/heritage/login")}})},o=l,c=(t("13ee"),t("2877")),p=Object(c["a"])(o,r,s,!1,null,"0096d332",null);e["a"]=p.exports}}]);
//# sourceMappingURL=chunk-4d1d81e8.ebfbd0de.js.map