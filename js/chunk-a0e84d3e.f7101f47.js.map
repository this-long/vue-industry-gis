{"version":3,"sources":["webpack:///./src/views/Heritage/getCoordinate.vue?f1a1","webpack:///./src/views/Heritage/getCoordinate.vue?ff09","webpack:///src/views/Heritage/getCoordinate.vue","webpack:///./src/views/Heritage/getCoordinate.vue?c504","webpack:///./src/views/Heritage/getCoordinate.vue?5403"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","drawGeometry","_v","_s","lang","getAgin","directives","name","rawName","value","newCoordinate","length","applyCoordinate","expression","sub","staticRenderFns","data","map","district","polygons","zoom","marker","geometrySearchType","geometryBox","mouseTool","overlays","geometrySearchRes","issearchRes","options","typeSelect","computed","created","console","log","CoordinateType","mounted","initMap","drawBounds","AMap","MouseTool","methods","Map","resizeEnable","zooms","center","viewMode","mapStyle","infoWindow","opts","subdistrict","extensions","level","DistrictSearch","setLevel","_this","search","status","result","outer","holes","districtList","boundaries","pathArray","push","apply","polygon","Polygon","pathL","strokeColor","strokeWeight","fillColor","fillOpacity","setPath","add","opengeometryBox","closegeometryBox","e","obj","getPosition","zb","close","getCoordinate","getapplyCoordinate","$router","component"],"mappings":"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","file":"js/chunk-a0e84d3e.f7101f47.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./getCoordinate.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"getCoordinate\"},[_c('div',{staticClass:\"heritage-industry\"},[_c('div',{staticClass:\"container\",attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"map-buttons\"},[_c('el-button',{staticClass:\"map-btn map-element\",attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.drawGeometry}},[_vm._v(_vm._s(_vm.lang === \"zh_cn\" ? \"拾取坐标\" : \"Pick coordinates\"))]),_c('el-button',{staticClass:\"map-btn map-element\",attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.getAgin}},[_vm._v(_vm._s(_vm.lang === \"zh_cn\" ? \"清空\" : \"Clear\"))]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n            this.newCoordinate.length !== 0 ||\n            this.applyCoordinate.length !== 0\n          ),expression:\"\\n            this.newCoordinate.length !== 0 ||\\n            this.applyCoordinate.length !== 0\\n          \"}],staticClass:\"map-btn map-element\",attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.sub}},[_vm._v(_vm._s(_vm.lang === \"zh_cn\" ? \"确定\" : \"OK\"))])],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 工业遗产 -->\r\n  <div class=\"getCoordinate\">\r\n    <div class=\"heritage-industry\">\r\n      <!-- 地图容器 -->\r\n      <div id=\"container\" class=\"container\">\r\n        <div class=\"map-buttons\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"drawGeometry\"\r\n            class=\"map-btn map-element\"\r\n            >{{ lang === \"zh_cn\" ? \"拾取坐标\" : \"Pick coordinates\" }}</el-button\r\n          >\r\n\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"getAgin\"\r\n            class=\"map-btn map-element\"\r\n            >{{ lang === \"zh_cn\" ? \"清空\" : \"Clear\" }}</el-button\r\n          >\r\n\r\n          <el-button\r\n            v-show=\"\r\n              this.newCoordinate.length !== 0 ||\r\n              this.applyCoordinate.length !== 0\r\n            \"\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"sub\"\r\n            class=\"map-btn map-element\"\r\n            >{{ lang === \"zh_cn\" ? \"确定\" : \"OK\" }}</el-button\r\n          >\r\n        </div>\r\n\r\n        <!-- 几何查询弹框 -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/javascript\" src=\"https://webapi.amap.com/maps?v=1.4.15&key=2eccb47b400c8ab58f2dc596dbfe9d53&plugin=AMap.MouseTool,AMap.DistrictSearch\"></script>\r\n<script>\r\nimport { mapState, mapMutations } from \"vuex\";\r\nexport default {\r\n  name: \"HeritageIndustry\",\r\n\r\n  data() {\r\n    return {\r\n      map: \"\",\r\n      district: null,\r\n      polygons: [],\r\n      zoom: 10,\r\n      marker: null, //工业遗产点位\r\n\r\n      // 几何查询\r\n      geometrySearchType: \"marker\", //始终为点\r\n      geometryBox: false, //几何查询面板隐藏展示\r\n      mouseTool: null,\r\n      overlays: [], //绘制好的覆盖物\r\n      geometrySearchRes: [], //几何查询结果\r\n      issearchRes: true, //查询结果图标显示隐藏\r\n\r\n      // 类型查询\r\n      options: [\r\n        {\r\n          type: \"全部类型\",\r\n        },\r\n      ],\r\n      typeSelect: \"全部类型\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapState([\"lang\", \"newCoordinate\", \"CoordinateType\", \"applyCoordinate\"]),\r\n  },\r\n\r\n  created() {\r\n    console.log(this.CoordinateType);\r\n  },\r\n\r\n  mounted() {\r\n    this.initMap(); //初始化地图\r\n\r\n    // this.disSearch();\r\n    this.drawBounds();\r\n    this.mouseTool = new AMap.MouseTool(this.map);\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\"getCoordinate\", \"getapplyCoordinate\"]),\r\n\r\n    initMap() {\r\n      //初始化地图\r\n      this.map = new AMap.Map(\"container\", {\r\n        resizeEnable: true,\r\n        zoom: this.zoom, //级别\r\n        zooms: [6.5, 18],\r\n        center: [115.464523, 38.874476], //中心点坐标\r\n        viewMode: \"3D\", //使用3D视图\r\n        lang: this.lang,\r\n        mapStyle: \"amap://styles/fresh\",\r\n        infoWindow: null,\r\n      });\r\n    },\r\n\r\n    // 裁剪边界\r\n    drawBounds() {\r\n      if (!this.district) {\r\n        //实例化DistrictSearch\r\n        var opts = {\r\n          subdistrict: 0, //获取边界不需要返回下级行政区\r\n          extensions: \"all\", //返回行政区边界坐标组等具体信息\r\n          level: \"province\", //查询行政级别为 市\r\n        };\r\n        this.district = new AMap.DistrictSearch(opts);\r\n      }\r\n      this.district.setLevel(\"province\");\r\n      var _this = this;\r\n      this.district.search(\"河北省\", function (status, result) {\r\n        // 河北省边界\r\n        // var bounds = result.districtList[0].boundaries;\r\n        // console.log(result);\r\n        // console.log(status);\r\n\r\n        var outer = [\r\n          new AMap.LngLat(-360, 90, true),\r\n          new AMap.LngLat(-360, -90, true),\r\n          new AMap.LngLat(360, -90, true),\r\n          new AMap.LngLat(360, 90, true),\r\n        ];\r\n        var holes = result.districtList[0].boundaries;\r\n\r\n        var pathArray = [outer];\r\n        pathArray.push.apply(pathArray, holes);\r\n        var polygon = new AMap.Polygon({\r\n          pathL: pathArray,\r\n          strokeColor: \"#F9D5A7\",\r\n          strokeWeight: 1,\r\n          fillColor: \"#F9D5A7\",\r\n          fillOpacity: 0.2,\r\n        });\r\n        polygon.setPath(pathArray);\r\n        _this.map.add(polygon);\r\n      });\r\n    },\r\n\r\n    // 几何查询函数系列start\r\n    opengeometryBox() {\r\n      this.geometryBox = !this.geometryBox;\r\n    },\r\n    closegeometryBox() {\r\n      this.geometryBox = !this.geometryBox;\r\n    },\r\n    // 集合查询函数系列start\r\n\r\n    drawGeometry() {\r\n      // console.log(this.geometrySearchType);\r\n      switch (this.geometrySearchType) {\r\n        case \"marker\": {\r\n          this.mouseTool.marker({\r\n            //同Marker的Option设置\r\n          });\r\n          break;\r\n        }\r\n      }\r\n      // this.mouseTool.close(); //关闭，并清除覆盖物\r\n      this.mouseTool.on(\"draw\", (e) => {\r\n        this.overlays.push(e.obj);\r\n        console.log(\"e.obj---------\", e.obj.getPosition()); //获取点标记的位置\r\n\r\n        var zb = e.obj.getPosition();\r\n        if (this.CoordinateType === \"add\") {\r\n          this.getCoordinate([zb.lng, zb.lat]);\r\n        } else if (this.CoordinateType === \"apply\") {\r\n          this.getapplyCoordinate([zb.lng, zb.lat]);\r\n        }\r\n\r\n        console.log(this.newCoordinate);\r\n\r\n        this.mouseTool.close(); //关闭\r\n      }); //解除绑定，\r\n    },\r\n\r\n    getAgin() {\r\n      this.mouseTool.close(true);\r\n      this.getCoordinate([]);\r\n      this.getapplyCoordinate([]);\r\n    },\r\n\r\n    sub() {\r\n      if (this.CoordinateType === \"add\") {\r\n        this.$router.push(\"/heritage/add/add\");\r\n      } else if (this.CoordinateType === \"apply\") {\r\n        this.$router.push(\"/heritage/apply\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.heritage-industry #container {\r\n  border-bottom: 1px solid #f9d5a7;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./getCoordinate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./getCoordinate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./getCoordinate.vue?vue&type=template&id=59dff860&\"\nimport script from \"./getCoordinate.vue?vue&type=script&lang=js&\"\nexport * from \"./getCoordinate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./getCoordinate.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}